<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>나를 소개합니다.</title>
    <style>
      body,
      ul,
      li {
        margin: 0;
        padding: 0;
        list-style: none;
        /* 해당 태그의 list-style을 none으로 하는 것으로 ●을 제거한다 */
      }

      a {
        color: inherit;
        /* 부모 엘리먼트의 값을 물려받는다 */
        text-decoration: none;
        /* 해당 태그의 text-decoration 속성을 none 값으로 하는 것으로 밑줄을 제거한다 */
      }

      /* 노멀라이즈 끝 */
      /* 2차 이상의 메뉴를 숨기기 */
      .side-bar > ul ul {
        display: none;
      }

      /* 사이트의 높이를 5000px로 만들어 스크롤 생성 */
      body {
        background-color: white;
      }

      /* 사이드바의 너비와 높이를 변수를 통해 통제 */
      :root {
        --side-bar-width: 200px;
        --side-bar-height: 100vh;
      }

      /* 사이드바 영역 */
      .sidebar {
        height: 100vh;
        width: 250px;
        background-color: wheat;
        padding: 50px;
      }

      /* 모든 메뉴의 a에 속성값 부여 */
      .side-bar ul > li > a {
        display: block;
        color: black;
        font-size: 1.4rem;
        font-weight: bold;
        padding-top: 20px;
        padding-bottom: 20px;
        padding-left: 50px;
      }

      .my_page {
        background-color: black;
        height: 100%;
        width: 55%;
        padding: 25px;
        margin: 20px auto 0px auto;
      }

      .introduce__myInfo {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-right: 80px;
      }

      .introduce__myInfo > span {
        margin-bottom: 5px;
      }

      .title {
        background-color: white;
        width: 150px;
        text-align: center;
        border-radius: 8px;
        padding: 10px;
        margin: 0px 0px 25px 0px;
        font-weight: 600;
      }

      .introduce__box {
        display: flex;
        justify-content: center;
      }

      .introduce__myInfo > .name {
        margin-bottom: 10px;
        font-size: 30px;
        font-weight: 500;
      }

      .my_profile {
        width: 200px;
        height: 200px;

        background-image: url("../picture/KYG/KYG_face.png");
        background-position: center;
        background-size: cover;
        border-radius: 10px;
        box-shadow: 0 0 8px;
      }

      .panel {
        border-radius: 8px;
        background-color: white;
        padding: 25px;
        margin: 0px 0px 80px 0px;
      }

      .panel > p {
        margin: 0px;
        text-align: center;
      }

      .hash__box {
        border-radius: 8px;
        background-color: white;
        padding: 25px;
        margin-bottom: 80px;
      }

      .hash__btns {
        display: flex;
      }

      .hash__box > .panel {
        background-color: black;
        color: white;
        text-align: center;
        margin: 0px;
        border-radius: 0px 0px 8px 8px;
      }

      .hash__box h1 {
        margin-bottom: 25px;
      }

      .imgs {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
      }

      .imgs > img {
        width: 100%;
        background-position: center;
        object-fit: cover
      }

      .imgs button,span {
        all: unset;
        cursor: pointer;
        font-size: 30px;
        margin-top:20px;
      }

      /*버튼 스타일*/
      .hash__btn {
        padding: 10px;
        background-color: black;
        width: 100%;
        color: white;
        border: none;
      }

      /* 첫 번째 버튼 border-radius*/
      .hash__btn:first-child {
        border-radius: 8px 0px 0px 0px;
      }

      /* 마지막막 버튼 border-radius*/
      .btn:last-child {
        border-radius: 0px 8px 0px 0px;
      }

      .hash__btn.active {
        background-color: gray;
      }

      .comment__box > .panel {
        margin: 25px 0px 0px 0px;
      }

      .comment {
        background-color: gray;
        color: white;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 8px;
      }

      .hidden {
        display: none;
      }

      #particlesCanvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        width: 100vw;
        height: 100vh;
        z-index: 9999;
      }
      button {
        position: relative;
        z-index: 1;
        padding: 10px 20px;
        font-size: 1.2rem;
      }

    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <nav class="col-md-3 col-lg-2 d-md-block sidebar">
          <h2>멤버들</h2>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link" href="../TeamWeb.html">메인으로</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="hyeonhaWEB.html">이현하</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="WSVWeb.html">우새빛</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="CHEWeb.html">최경진</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="HJ.html">윤희준</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="KYGWeb.html">김용준</a>
            </li>
          </ul>
        </nav>
        <div class="my_page">
          <h3 class="title">#자기소개</h3>
          <div class="introduce__box panel">
            <div class="introduce__myInfo">
              <div class="name">이름 : 김용준</div>
              <span>- 백엔드 개발자 취준생 -</span>
              <ul>
                <li>취미 : 코딩</li>
                <li>운동 : 헬스</li>
                <li>MBTI : ISTP</li>
              </ul>
            </div>
            <div class="my_profile"></div>
          </div>
          <h3 class="title">#한줄소개</h3>
          <div class="panel">
            <p>
              안녕하세요. 저는 이번에 백엔드로 취업하기위해 내일배움캠프를
              시작하게 되었습니다.
            </p>
          </div>
          <h3 class="title">#사진</h3>
          <div class="hash__box">
            <div class="hash__btns">
              <button class="hash__btn">음식</button>
              <button class="hash__btn">고양이</button>
              <button class="hash__btn">풍경</button>
            </div>
            <div class="panel">
              <h1>음식</h1>
              <div class="imgs">
                <img src="../picture/KYG/KYG_picture.jpg"></img>
                <div>
                  <button>❤️</button>
                  <span>0</span>
                </div>
              </div>
            </div>
            <div class="panel hidden">
              <h1>고양이</h1>
              <div class="imgs">
                <img src="../picture/KYG/KYG_cat.jpg"></img>
                <div>
                  <button>❤️</button>
                  <span>0</span>
                </div>
              </div>
            </div>
            <div class="panel hidden">
              <h1>풍경</h1>
              <div class="imgs">
                <img src="../picture/KYG/KYG_landscape.jpg"></img>
                <div>
                  <button>❤️</button>
                  <span>0</span>
                </div>
              </div>
            </div>
          </div>
          <h3 class="title">#댓글</h3>
          <div class="comment__box">
            <input type="textarea" />
            <button>입력하기</button>
            <div class="panel"></div>
          </div>
        </div>
      </div>
    </div>
    <canvas id="particlesCanvas"></canvas>
  </body>
  <script>
    const btns = document.querySelectorAll(".hash__btns button");
    const panels = document.querySelectorAll(".hash__box .panel");

    btns[0].classList.add("active");

    const handleBtnClick = (event) => {
      const clickedTarget = event.target;
      const text = clickedTarget.innerText;

    // 모든 버튼에서 active 클래스 제거
    btns.forEach((btn) => btn.classList.remove("active"));

    // 클릭한 버튼에 active 클래스 추가
    clickedTarget.classList.add("active");

      panels.forEach((panel) => {
        const panelName = panel.querySelector("h1").innerText;
        panel.classList.toggle("hidden", panelName !== text);
      });
    };

    btns.forEach((btn) => {
      btn.addEventListener("click", handleBtnClick);
    });

    const commentBox = document.querySelector(".comment__box");
    const commentInput = commentBox.querySelector("input");
    const commentBtn = commentBox.querySelector("button");

    const addComment = (input) => {
      const comment = document.createElement("div");
      const commentPanel = commentBox.querySelector(".panel");
      comment.innerText = input;
      comment.className = "comment";
      commentPanel.appendChild(comment);
    };

    const handleCommentClick = (event) => {
      event.preventDefault();
      const input = commentInput.value;
      addComment(input);
      commentInput.value = "";
    };

    commentBtn.addEventListener("click", handleCommentClick);

    const imgs = document.querySelector(".imgs");
    const goodButtons = imgs.querySelectorAll("button");
    const goodTimeText = imgs.querySelector("span");
    let goodTimeCount = 0;

    const handleGoodBtnClick = (event) => {
      goodTimeCount += 1;
      goodTimeText.innerText = goodTimeCount;
    }

    goodButtons.forEach(button => {
      button.addEventListener("click", handleGoodBtnClick);
    })

      const canvas = document.getElementById('particlesCanvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      let animationStarted = false;

      let particles = [];

      function createParticles(x, y) {
        for (let i = 0; i < 30; i++) {
          particles.push({
            x,
            y,
            radius: Math.random() * 20 + 10, // 이모지는 크게!
            emoji: '❤️',
            speedX: (Math.random() - 0.5) * 4,
            speedY: (Math.random() - 0.5) * 4,
            life: 100
          });
        }
      }

      let lastScrollY = window.scrollY;

      // 변경된 updateParticles 함수
      function updateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => p.life > 0);

        const scrollOffsetY = window.scrollY - lastScrollY;

        particles.forEach(p => {
          // 위치 업데이트
          p.x -= p.speedX;
          p.y -= p.speedY + scrollOffsetY;  // 스크롤 보정!

          p.life--;

          ctx.font = `${p.radius}px serif`;
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText(p.emoji, p.x, p.y);
        });

        lastScrollY = window.scrollY;
        requestAnimationFrame(updateParticles);
      }


      document.querySelectorAll('.imgs button').forEach(button => {
      button.addEventListener('click', (e) => {
        const rect = e.target.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top + rect.height / 2;
        createParticles(x, y);

        if (!animationStarted) {
          updateParticles();
          animationStarted = true;
        }
      });
    });

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</html>
